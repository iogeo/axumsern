
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">
<head>
    <script src='ffmpeg.min.js'></script>
</head>
<body>
    <p><span id=q>Log in as User </span><input type="text" id=userid></input> <button id=user>Log in</button> </p>
    <script type="module">
        import init, { cqwr } from "/pkg";
        var rppq = "mousedown";
        var streamrq;
        var ws;
        var q = "aqqw";
        const userid = document.getElementById('userid');
        const user = document.getElementById('user');

        var rq = "";
        var rw = [];
        var rpw = [];
        var rpi = 1;
        var rpqi = 4;
        var rpqw = 2;
        var wrpqw = "waiting";
        init();
        async function sock2(l) {
            ws.send(streamrq);
            ws.send("cs");
            ws.removeEventListener("open", sock2);
        }
        async function sockw2(l) {
            ws.removeEventListener("message", sockw2);
            ws = new WebSocket("wss://qw.bhuman.ai/qw");
            ws.addEventListener("open", sock3);
            ws.addEventListener("message", sockw);
            async function sock3(l) {
                ws.send(streamrq);
                ws.send("intro");
                ws.removeEventListener("open", sock3);
            }
            var q = await l.data.text();
            var rqw = 0;
            while (q[rqw] != "\n") {
                rqw += 1;
            }
            rqw += 1;
            while (rqw < q.length) {
                var rp = "";
                var rp2 = "";
                while (q[rqw] != ",") {
                    rp += q[rqw];
                    rqw += 1;
                }
                var rwq = 0;
                var rpr = "";
                while (rwq < rp.length) {
                    if (rp[rwq] <= "Z" && rp[rwq] >= "A") {
                        rpr += rp[rwq].toLowerCase();
                    }
                    else if (rp[rwq] <= "z" && rp[rwq] >= "a") {
                        rpr += rp[rwq];
                    }
                    else if (rp[rwq - 1] == "'" && (rp[rwq] == "s" || rp[rwq] == "S")) {
                        rpr += " is";
                    }
                    else if (rp[rwq] == " ") {
                        rpr += " ";
                    }
                    rwq += 1;
                }
                rq += rpr;
                rq += "\n";
                rqw += 1;
                while (q[rqw + 1] != "\n" && rqw < q.length) {
                    rp2 += q[rqw];
                    rqw += 1;
                }
                rw.push(rp2);
                rqw += 2;
            }
        }
        function eqw(l) {
            user.removeEventListener(rppq, eqw);
            ws = new WebSocket("wss://qw.bhuman.ai/qw");
            streamrq = userid.value;
            ws.addEventListener("open", sock2);
            ws.addEventListener("message", sockw2);
        }
        async function sockw(l) {
            q = l.data;
            var ul = URL.createObjectURL(new Blob([q], { type: 'video/mp4' }));
            var a = document.createElement("video");
            document.body.appendChild(a);
            a.hidden = "hidden";
            a.src = ul;
            a.id = "intro";
            a.preload = "auto";
            document.getElementById("intro").addEventListener("ended", sockwprqr);
            ws.removeEventListener("message", sockw2);
            ws = new WebSocket("wss://qw.bhuman.ai/qw");
            ws.addEventListener("message", sockwp);
            ws.addEventListener("open", sock4);
            async function sock4(l) {
                ws.send(streamrq);
                ws.send("waiting");
                ws.removeEventListener("open", sock4);
            }
        }
        async function sockwp(l) {
            q = l.data;
            var ul = URL.createObjectURL(new Blob([q], { type: 'video/mp4' }));
            var a = document.createElement("video");
            document.body.appendChild(a);
            a.hidden = "hidden";
            a.src = ul;
            a.id = "waiting";
            a.preload = "auto";
            document.getElementById("waiting").addEventListener("ended", sockwprqr2);
            ws.removeEventListener("message", sockwp);
            ws = new WebSocket("wss://qw.bhuman.ai/qw");
            ws.addEventListener("message", sockwpr);
            ws.addEventListener("open", sock5);
            async function sock5(l) {
                ws.send(streamrq);
                ws.send("3");
                ws.removeEventListener("open", sock5);
            }
        }
        async function sockwpr(l) {
            ws.removeEventListener("close", sockwprq);
            ws.removeEventListener("error", sockwprq);
            q = l.data;
            var ul = URL.createObjectURL(new Blob([q], { type: 'video/mp4' }));
            var a = document.createElement("video");
            document.body.appendChild(a);
            a.hidden = "hidden";
            a.src = ul;
            a.id = "Template " + rpi;
            a.preload = "auto";
            document.getElementById("Template " + rpi).addEventListener("ended", sockwprqr2);
            rpi += 1;
            ws = new WebSocket("wss://qw.bhuman.ai/qw");
            ws.addEventListener("open", sock7);
            ws.addEventListener("message", sockwpr);
            ws.addEventListener("close", sockwprq);
            ws.addEventListener("error", sockwprq);
            async function sock7(l) {
                ws.send(streamrq);
                ws.send(rpqi + "");
                rpqi += 1;
                ws.removeEventListener("open", sock7);
            }
        }
        async function sockwprq(l) {
            document.getElementById("intro").removeAttribute("hidden");
            document.getElementById("q").innerHTML = "";
            document.getElementById("user").innerHTML = "Ask";
            user.removeEventListener(rppq, eqw);
            user.addEventListener(rppq, reqw);
            document.getElementById("intro").play();
        }
        async function sockwprqr(l) {
            document.getElementById("intro").setAttribute("hidden", "");
            document.getElementById("waiting").removeAttribute("hidden");
            document.getElementById("waiting").play();
        }
        var rwqp = "";
        async function sockwprqr2(l) {
            document.getElementById("waiting").setAttribute("hidden", "");
            document.getElementById(wrpqw).setAttribute("hidden", "");
            if (rpqw == 2) {
                document.getElementById("waiting").removeAttribute("hidden");
                document.getElementById("waiting").play();
            }
            else {

                rpqw = 2;
                rwqp = userid.value;
                userid.value = "";
                var rqw = "";
                rqw = cqwr(rq, rwqp);
                document.getElementById("q").innerHTML = rqw;
                if (rqw == rq.length) {

                    document.getElementById("waiting").removeAttribute("hidden");
                    document.getElementById("waiting").play();
                }
                else {
                    wrpqw = rw[rqw];
                    document.getElementById(rw[rqw]).removeAttribute("hidden");
                    document.getElementById(rw[rqw]).play();
                }
            }
        }
        async function reqw(l) {
            rpqw = 3;

        }
        user.addEventListener(rppq, eqw);
    </script>
</body>
</html>
