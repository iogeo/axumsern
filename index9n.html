<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
          "http://www.w3.org/TR/html4/loose.dtd">
<head>
    <script src='ffmpeg.min.js'></script>
</head>
<body>
    <video controls width="640" height="480" id="wq" hidden loop></video>
    <canvas id="canvas" width="640" height="480"></canvas>
    <p>Log in as User <input type="text" id=userid></input> <button id=user>Log in</button> </p>
    <script>
        var rppq = "mousedown";
        var streamrq;
        var ws;
        var wq = document.getElementById("wq");
        var q = "";
        const canvas = document.getElementById('canvas');
        const userid = document.getElementById('userid');
        const user = document.getElementById('user');
        const ctx = canvas.getContext('2d');
              
        function eqw(l) {
            ws = new WebSocket("wss://qw.bhuman.ai/qw");
            ws.addEventListener("open", sock2);
            streamrq = userid.value;
            ws.addEventListener("message", sockw);
        }
        async function sock2(l) {
            ws.send("qw");
            ws.send("waiting");
            ws.removeEventListener("open", sock2);
        }
        async function sockw(l) {
            q = l.data;
            var ul = URL.createObjectURL(new Blob([q], { type: 'video/mp4' }));
            wq.src = ul;
            wq.play();
        }
        function qwpr() {
            ctx.drawImage(wq, 0, 0, wq.width, wq.height);
        }
        user.addEventListener(rppq, eqw);
        wqr = setInterval(qwpr, 3);
    </script>
</body>
</html>
